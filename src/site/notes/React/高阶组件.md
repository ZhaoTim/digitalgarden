---
{"dg-publish":true,"permalink":"/react//","dgPassFrontmatter":true,"created":"2023-10-06T21:08:14.634+08:00","updated":"2025-03-18T01:04:43.957+08:00"}
---


如果我们有一个组件**Button**，希望在点击的时候，进行事件的上报，我们会在Button的onClick props里，上报。
```js
const App = () => {
	const logging = () => console.log('logging');
	const hanldeClick = () => {}
	const onClick = () => {
		logging();
		hanldeClick();
	}

	return <Button onClick={onClick}></Button>
}
```

现在，希望每一个整个APP内的每个Button组件都要上报，所以我们不得不把上报逻辑写进Button组件内部的实现里：

```js
const Button = () => {
	const logging = () => console.log('logging');
	const hanldeClick = () => {}
	const onClick = () => {
		logging();
		hanldeClick();
	}
	return <button onClick={onClick} />
}
```

但是我们现在不止要在Button组件里实现上报逻辑，我们要在ListItem组件内，实现一样的上报逻辑：

```js
const ListItem = () => {
	const logging = () => console.log('logging');
	const hanldeClick = () => {}
	const onClick = () => {
		logging();
		hanldeClick();
	}
	return <div onClick={onClick} />
}
```

这样实现起来不优雅，我们在**复制-粘贴**代码。可以使用高阶组件把逻辑抽象出来，像这样

```js
const withLogging = (Component) => {
	return (props) => {
		const logging = () => console.log('logging');
		const onClick = () => {
			logging();
			// 重点在这里，一定要调用props.onClick()。
			props.onClick();
		}
		return <Component {...props} onClick={onClick}/>
	}
}
```

之后我们的使用就很简单了：
```js
const ListItemWithLogging = withLogging(ListItem)
const ButtonWithLogging = withLogging(Button)
```

> 这样的好处是，我们没有「入侵」我们的业务组件了！而是enhance组件的功能！相同的逻辑我们只写在了一处，方便维护。